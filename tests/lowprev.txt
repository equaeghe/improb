Regression tests for the LowPrev class
======================================

Natural extension of a coherent lower prevision
-----------------------------------------------

>>> from improb.lowprev import LowPrev
>>> lpr = LowPrev(3)
>>> print "%.6f" % lpr.get_lower([1,2,3])
1.000000
>>> print "%.6f" % lpr.get_upper([1,2,3])
3.000000
>>> lpr.set_lower([1,2,3], 1.5)
>>> lpr.set_upper([1,2,3], 2.5)
>>> print "%.6f" % lpr.get_lower([1,2,3])
1.500000
>>> print "%.6f" % lpr.get_upper([1,2,3])
2.500000

Frechet bounds
--------------

>>> from improb.lowprev import LowPrev
>>> lpr = LowPrev(4)
>>> lpr.set_precise([1,1,0,0], 0.6)
>>> lpr.set_precise([0,1,1,0], 0.7)
>>> print "%.6f" % lpr.get_lower([0,1,0,0]) # max(0.6+0.7-1,0)
0.300000
>>> print "%.6f" % lpr.get_upper([0,1,0,0]) # min(0.6,0.7)
0.600000
>>> lpr.is_linear()
True

Avoiding sure loss
------------------

This example incurs sure loss because the maximum of the sum of the gambles
[1,2,3,0] and [3,2,1,0] is 4, however 2.5 + 2.5 is strictly larger than 4.

>>> from improb.lowprev import LowPrev
>>> lpr = LowPrev(4)
>>> lpr.set_lower([1,2,3,0], 2.5)
>>> lpr.is_avoiding_sure_loss()
True
>>> lpr.set_lower([3,2,1,0], 2.5)
>>> lpr.is_avoiding_sure_loss()
False

Coherence
---------

>>> from improb.lowprev import LowPrev
>>> lpr = LowPrev(4)
>>> lpr.set_lower([1,2,3,0], 2.5)
>>> lpr.is_coherent()
True
>>> lpr.set_upper([2,4,6,0], 3) # coherence requires at least 5
>>> lpr.is_coherent()
False

Linearity
---------

>>> from improb.lowprev import LowPrev
>>> lpr = LowPrev(4)
>>> lpr.set_lower([1,2,3,0], 2.5)
>>> lpr.is_linear()
False
>>> lpr.set_upper([2,4,6,0], 5)
>>> lpr.is_linear()
True

Another example
---------------

Finding coherent lower and upper bounds for the oil catter example in

Kikuti, D., Cozman, F., de Campos, C.: Partially ordered preferences
in decision trees: Computing strategies with imprecision in
probabilities. In: R. Brafman, U. Junker (eds.) IJCAI-05
Multidisciplinary Workshop on Advances in Preference Handling,
pp. 118â€“123 (2005)

>>> from improb.lowprev import LowPrev
>>> lpr = LowPrev(3)
>>> lpr.set_lower([1,0,0], 0.5)
>>> lpr.set_upper([1,0,0], 0.666)
>>> lpr.set_lower([0,1,0], 0.222)
>>> lpr.set_upper([0,1,0], 0.272)
>>> lpr.set_lower([0,0,1], 0.125)
>>> lpr.set_upper([0,0,1], 0.181)
>>> lpr.is_coherent()
False
>>> print(lpr.get_lower([1,0,0])) # not coherent!
0.547
>>> print(lpr.get_upper([1,0,0])) # not coherent!
0.653
>>> print(lpr.get_lower([0,1,0]))
0.222
>>> print(lpr.get_upper([0,1,0]))
0.272
>>> print(lpr.get_lower([0,0,1]))
0.125
>>> print(lpr.get_upper([0,0,1]))
0.181
>>> lpr = LowPrev(3)
>>> lpr.set_lower([1,0,0], 0.222)
>>> lpr.set_upper([1,0,0], 0.333)
>>> lpr.set_lower([0,1,0], 0.363)
>>> lpr.set_upper([0,1,0], 0.444)
>>> lpr.set_lower([0,0,1], 0.250)
>>> lpr.set_upper([0,0,1], 0.363)
>>> lpr.is_coherent()
True
>>> print(lpr.get_lower([1,0,0]))
0.222
>>> print(lpr.get_upper([1,0,0]))
0.333
>>> print(lpr.get_lower([0,1,0]))
0.363
>>> print(lpr.get_upper([0,1,0]))
0.444
>>> print(lpr.get_lower([0,0,1]))
0.25
>>> print(lpr.get_upper([0,0,1]))
0.363
>>> lpr = LowPrev(3)
>>> lpr.set_lower([1,0,0], 0.111)
>>> lpr.set_upper([1,0,0], 0.166)
>>> lpr.set_lower([0,1,0], 0.333)
>>> lpr.set_upper([0,1,0], 0.363)
>>> lpr.set_lower([0,0,1], 0.454)
>>> lpr.set_upper([0,0,1], 0.625)
>>> lpr.is_coherent()
False
>>> print(lpr.get_lower([1,0,0]))
0.111
>>> print(lpr.get_upper([1,0,0]))
0.166
>>> print(lpr.get_lower([0,1,0]))
0.333
>>> print(lpr.get_upper([0,1,0]))
0.363
>>> print(lpr.get_lower([0,0,1])) # not coherent!
0.471
>>> print(lpr.get_upper([0,0,1])) # not coherent!
0.556
>>> lpr = LowPrev(3)
>>> lpr.set_lower([1,0,0], 0.181)
>>> lpr.set_upper([1,0,0], 0.222)
>>> lpr.set_lower([0,1,0], 0.333)
>>> lpr.set_upper([0,1,0], 0.363)
>>> lpr.set_lower([0,0,1], 0.444)
>>> lpr.set_upper([0,0,1], 0.454)
>>> lpr.is_coherent()
False
>>> print(lpr.get_lower([1,0,0])) # not coherent!
0.183
>>> print(lpr.get_upper([1,0,0]))
0.222
>>> print(lpr.get_lower([0,1,0]))
0.333
>>> print(lpr.get_upper([0,1,0]))
0.363
>>> print(lpr.get_lower([0,0,1]))
0.444
>>> print(lpr.get_upper([0,0,1]))
0.454
